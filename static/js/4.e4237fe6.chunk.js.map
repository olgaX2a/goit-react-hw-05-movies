{"version":3,"sources":["apiService/apiService.js","apiService/normalizeResults.js","components/Cast/Cast.module.css","components/Reviews/Reviews.module.css","components/Cast/Cast.jsx","components/Reviews/Reviews.jsx","pages/MovieDetailsPage.jsx"],"names":["axios","defaults","baseURL","API_KEY","getTrendingMovies","method","url","getMoviesByQuery","query","getMovieById","movie_id","getMovieCast","getMovieReview","posterUrl","defaultAvatar","createPoster","obj","poster_path","createActorAvatar","profile_path","createReviewAvatar","initialAvatar","author_details","avatar_path","console","log","includes","slice","length","module","exports","Cast","useState","cast","setCast","location","useLocation","useEffect","a","state","id","data","map","res","avatar","getCast","className","styles","castList","name","castItem","src","alt","width","Reviews","reviews","setReviews","results","getReviews","reviewList","author","content","reviewItem","MovieDetailsPage","movie","setMovie","history","useHistory","match","useRouteMatch","cleanupFunction","response","fullInfo","poster","prevState","info","getInfo","Button","variant","color","onClick","push","from","search","original_title","tagline","style","margin","overview","textDecoration","to","pathname","fontSize","path","exact","component"],"mappings":"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","file":"static/js/4.e4237fe6.chunk.js","sourcesContent":["import axios from 'axios'\r\n\r\naxios.defaults.baseURL = 'https://api.themoviedb.org/3'\r\nconst API_KEY = 'a6a422d110dec9c7fa9eeee757b6f274'\r\n\r\nfunction getTrendingMovies() {\r\n  return axios({\r\n    method: 'GET',\r\n    url: `/trending/movie/week?api_key=${API_KEY}`,\r\n  })\r\n}\r\n\r\nfunction getMoviesByQuery(query) {\r\n  return axios({\r\n    method: 'GET',\r\n    url: `/search/movie?api_key=${API_KEY}&query=${query}`,\r\n  })\r\n}\r\n\r\nfunction getMovieById(movie_id) {\r\n  return axios({\r\n    method: 'GET',\r\n    url: `/movie/${movie_id}?api_key=${API_KEY}`,\r\n  })\r\n}\r\n\r\nfunction getMovieCast(movie_id) {\r\n  return axios({\r\n    method: 'GET',\r\n    url: `/movie/${movie_id}/credits?api_key=${API_KEY}`,\r\n  })\r\n}\r\n\r\nfunction getMovieReview(movie_id) {\r\n  return axios({\r\n    method: 'GET',\r\n    url: `/movie/${movie_id}/reviews?api_key=${API_KEY}`,\r\n  })\r\n}\r\n\r\nexport {\r\n  getTrendingMovies,\r\n  getMoviesByQuery,\r\n  getMovieById,\r\n  getMovieCast,\r\n  getMovieReview,\r\n}\r\n","const posterUrl = 'https://image.tmdb.org/t/p/w500'\r\nconst defaultAvatar =\r\n  'https://cdn.pixabay.com/photo/2016/11/18/23/38/child-1837375_960_720.png'\r\nconst defaultPoster =\r\n  'https://cdn.pixabay.com/photo/2016/03/31/18/36/cinema-1294496_960_720.png'\r\n\r\nfunction createPoster(obj) {\r\n  return obj.poster_path ? posterUrl + obj.poster_path : defaultPoster\r\n}\r\nfunction createActorAvatar(obj) {\r\n  return obj.profile_path ? posterUrl + obj.profile_path : defaultAvatar\r\n}\r\nfunction createReviewAvatar(obj) {\r\n  const initialAvatar = obj.author_details.avatar_path\r\n  console.log(`initialAvatar`, initialAvatar)\r\n  if (!initialAvatar) {\r\n    return defaultAvatar\r\n  }\r\n  if (initialAvatar.includes('http')) {\r\n    return initialAvatar.slice(1, initialAvatar.length - 1)\r\n  }\r\n  return posterUrl + initialAvatar\r\n}\r\n\r\nexport { createPoster, createActorAvatar, createReviewAvatar }\r\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"castList\":\"Cast_castList__2BpLu\",\"castItem\":\"Cast_castItem__1fjjZ\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"reviewList\":\"Reviews_reviewList__2tNHK\",\"reviewItem\":\"Reviews_reviewItem__OLwbg\"};","import { useState, useEffect } from \"react\";\r\nimport { useLocation } from \"react-router\";\r\nimport PropTypes from \"prop-types\";\r\n\r\nimport styles from \"./Cast.module.css\";\r\n\r\nimport { getMovieCast } from \"../../apiService/apiService\";\r\nimport { createActorAvatar } from \"../../apiService/normalizeResults\";\r\n\r\nfunction Cast() {\r\n  const [cast, setCast] = useState([]);\r\n  const location = useLocation();\r\n\r\n  useEffect(() => {\r\n    const getCast = async () => {\r\n      try {\r\n        const {\r\n          data: { cast },\r\n        } = await getMovieCast(location.state.id);\r\n        setCast(\r\n          cast.map((res) => ({ ...res, avatar: createActorAvatar(res) }))\r\n        );\r\n      } catch (error) {\r\n        console.log(\"error :>> \", error);\r\n      }\r\n    };\r\n    getCast();\r\n  }, [location.state.id]);\r\n\r\n  return (\r\n    <div>\r\n      <ul className={styles.castList}>\r\n        {cast.length > 0 ? (\r\n          cast.map(({ id, name, avatar }) => (\r\n            <li key={id} className={styles.castItem}>\r\n              <h4>{name}</h4>\r\n              <img src={avatar} alt={name} width=\"80\" />\r\n            </li>\r\n          ))\r\n        ) : (\r\n          <li className={styles.castItem}>\r\n            <p>No actors list for this movie was found</p>\r\n          </li>\r\n        )}\r\n      </ul>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default Cast;\r\n\r\nCast.propTypes = {\r\n  cast: PropTypes.arrayOf(PropTypes.object),\r\n};\r\n","import { useState, useEffect } from \"react\";\r\nimport { useLocation } from \"react-router\";\r\nimport PropTypes from \"prop-types\";\r\n\r\nimport styles from \"./Reviews.module.css\";\r\n\r\nimport { getMovieReview } from \"../../apiService/apiService\";\r\nimport { createReviewAvatar } from \"../../apiService/normalizeResults\";\r\n\r\nfunction Reviews() {\r\n  const [reviews, setReviews] = useState([]);\r\n  const location = useLocation();\r\n\r\n  useEffect(() => {\r\n    const getReviews = async () => {\r\n      try {\r\n        const {\r\n          data: { results },\r\n        } = await getMovieReview(location.state.id);\r\n        console.log(\"reviews :>> \", results);\r\n        setReviews(\r\n          results.map((res) => ({ ...res, avatar: createReviewAvatar(res) }))\r\n        );\r\n      } catch (error) {\r\n        console.log(\"error :>> \", error);\r\n      }\r\n    };\r\n    getReviews();\r\n  }, [location.state.id]);\r\n\r\n  return (\r\n    <div>\r\n      <ul className={styles.reviewList}>\r\n        {reviews.length > 0 ? (\r\n          reviews.map(({ id, author, avatar, content }) => {\r\n            return (\r\n              <li key={id} className={styles.reviewItem}>\r\n                <h4>{author}</h4> <img src={avatar} alt={author} width=\"80\" />\r\n                <p>{content}</p>\r\n              </li>\r\n            );\r\n          })\r\n        ) : (\r\n          <li className={styles.reviewItem}>\r\n            <p>No reviews</p>\r\n          </li>\r\n        )}\r\n      </ul>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default Reviews;\r\n\r\nReviews.propTypes = {\r\n  reviews: PropTypes.arrayOf(PropTypes.object),\r\n};\r\n","import { useState, useEffect } from \"react\";\r\nimport { useHistory, useLocation, useRouteMatch } from \"react-router\";\r\nimport { NavLink, Route } from \"react-router-dom\";\r\n\r\nimport Cast from \"../components/Cast/Cast\";\r\nimport Reviews from \"../components/Reviews/Reviews\";\r\nimport Button from \"@material-ui/core/Button\";\r\n\r\nimport { getMovieById } from \"../apiService/apiService\";\r\nimport { createPoster } from \"../apiService/normalizeResults\";\r\n\r\nfunction MovieDetailsPage() {\r\n  const [movie, setMovie] = useState({});\r\n  const location = useLocation();\r\n  const history = useHistory();\r\n  const match = useRouteMatch();\r\n\r\n  useEffect(() => {\r\n    let cleanupFunction = false;\r\n    if (location.state?.id) {\r\n      const getInfo = async () => {\r\n        try {\r\n          const response = await getMovieById(location.state.id);\r\n          const fullInfo = {\r\n            ...response.data,\r\n            poster: createPoster(response.data),\r\n          };\r\n          if (!cleanupFunction) {\r\n            setMovie((prevState) => ({\r\n              ...prevState,\r\n              info: fullInfo,\r\n            }));\r\n          }\r\n        } catch (error) {\r\n          console.log(\"error :>> \", error);\r\n        }\r\n      };\r\n      getInfo();\r\n    }\r\n    return () => (cleanupFunction = true);\r\n  }, [location.state.id]);\r\n  return (\r\n    <div>\r\n      <Button\r\n        variant=\"contained\"\r\n        color=\"primary\"\r\n        onClick={() => {\r\n          history.push(location.state.from, {\r\n            search: location.state.search,\r\n          });\r\n        }}\r\n      >\r\n        go back\r\n      </Button>\r\n      <h1>{movie.info?.original_title}</h1>\r\n      <img src={movie.info?.poster} alt={movie.info?.tagline} width=\"300\" />\r\n      <h3>Overview</h3>\r\n      <p style={{ width: \"600px\", margin: \"0 auto\" }}>{movie.info?.overview}</p>\r\n      <NavLink\r\n        style={{\r\n          textDecoration: \"none\",\r\n        }}\r\n        to={{\r\n          pathname: `${match.url}/reviews`,\r\n          state: location.state,\r\n        }}\r\n      >\r\n        <Button style={{ fontSize: \"28px\" }} color=\"primary\">\r\n          Reviews\r\n        </Button>\r\n      </NavLink>\r\n      <NavLink\r\n        style={{\r\n          textDecoration: \"none\",\r\n        }}\r\n        to={{\r\n          pathname: `${match.url}/cast`,\r\n          state: location.state,\r\n        }}\r\n      >\r\n        <Button style={{ fontSize: \"28px\" }} color=\"primary\">\r\n          Cast\r\n        </Button>\r\n      </NavLink>\r\n      <Route path={`${match.path}/reviews`} exact component={Reviews}></Route>\r\n      <Route path={`${match.path}/cast`} exact component={Cast}></Route>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default MovieDetailsPage;\r\n"],"sourceRoot":""}